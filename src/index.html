<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Creator Master</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>Prompt Creator Master</h1>
            <p>The Ultimate Prompt Making Machine</p>
        </header>
        
        <main>
            <div id="lens-selection" class="container">
                
                <div id="abandoned-prompts-container" class="container">
                    <h2>Abandoned Prompts</h2>
                    <ul id="abandoned-list">
                        <li class="abandoned-item">No abandoned sessions found.</li>
                    </ul>
                    <hr>
                </div>
                
                <div class="lens-container">
                    <h2>Select Your Lens</h2>
                    <div class="lens-grid">
                        <div class="lens-card" data-lens="architect"><h3>The Architect</h3><p>Foundational Framework Creator</p></div>
                        <div class="lens-card" data-lens="maverick"><h3>The Maverick</h3><p>Strategic Intent Creator</p></div>
                        <div class="lens-card" data-lens="storyteller"><h3>The Storyteller</h3><p>Persona & Scenario Weaver</p></div>
                        <div class="lens-card" data-lens="editor"><h3>The Editor</h3><p>Universal Prompt Refiner</p></div>
                        <div class="lens-card" data-lens="freemason"><h3>The Freemason</h3><p>Tool & Function Creator</p></div>
                        <div class="lens-card" data-lens="goalmaker"><h3>The Goal-Maker</h3><p>Objective & Achievement</p></div>
                        <div class="lens-card" data-lens="wellness"><h3>The Wellness Guide</h3><p>Health & Personal Growth</p></div>
                        <div class="lens-card" data-lens="researcher"><h3>The Deep Researcher</h3><p>Legal & Academic</p></div>
                        <div class="lens-card" data-lens="presenter"><h3>The Presenter</h3><p>Communication & Delivery</p></div>
                    </div>
                </div>
            </div>

            <div id="qa-screen" class="container" style="display: none;">
                <div id="qa-nav">
                    <button id="qa-back-btn" class="qa-nav-btn">Back to Lenses</button>
                    <div id="qa-progress-bar"><div id="qa-progress-fill"></div></div>
                    <button id="qa-next-btn" class="qa-nav-btn">Next</button>
                </div>
                <div id="qa-content">
                    <h2 id="qa-question-title"></h2>
                    <div id="qa-choices-container"></div>
                    <div class="qa-custom-answer">
                        <label for="qa-custom-text">Custom Answer:</label>
                        <textarea id="qa-custom-text" rows="4" placeholder="Write your own answer or add details..."></textarea>
                    </div>
                    <div class="qa-skip-option">
                        <input type="checkbox" id="qa-skip-checkbox">
                        <label for="qa-skip-checkbox">Not Applicable / Skip this step</label>
                    </div>
                </div>
                <div id="qa-preview">
                    <h3>Live Draft Preview</h3>
                    <pre id="qa-preview-text"></pre>
                </div>
            </div>

            <div id="workbench-screen" class="container" style="display: none;">
                <div id="workbench-nav">
                    <button id="wb-btn-start-over" class="qa-nav-btn">Start Over</button>
                </div>
                <div id="workbench-layout">
                    <div id="workbench-preview-container">
                        <h3>Final Assembled Prompt</h3>
                        <pre id="workbench-prompt-text"></pre>
                    </div>
                    <div id="workbench-actions-container">
                        <h3>Actions</h3>
                        <div class="wb-actions-grid">
                            <button id="wb-btn-copy" class="wb-action-btn">Copy to Clipboard</button>
                            <button id="wb-btn-remix" class="wb-action-btn accent">Remix This Prompt</button>
                            <button id="wb-btn-save" class="wb-action-btn">Save to Vault</button>
                        </div>
                        
                        <h4>Export Prompt</h4>
                        <div class="input-group">
                            <select id="export-format" class="input-select" style="width: 100%; margin-bottom: 10px;">
                                <option value="docx">Microsoft Word (.docx)</option>
                                <option value="pdf">PDF Document (.pdf)</option>
                                <option value="markdown" selected>Markdown (.md)</option>
                                <option value="html">HTML Styled (.html)</option>
                            </select>
                            <button id="wb-btn-export" class="wb-action-btn accent" style="width: 100%;">
                                Export File
                            </button>
                        </div>
                        
                        <hr style="border-top: 1px solid #1f1f3a; margin: 20px 0;">

                        <h4>Attach Representative Image (Online Only)</h4>
                        <button id="wb-btn-fetch-image" class="wb-action-btn accent" style="width: 100%;">
                            Find Image Keywords
                        </button>
                        <div id="image-fetch-container" style="display: none; margin-top: 15px;">
                            <p>Keywords: <span id="image-keywords"></span></p>
                            <div id="image-gallery-thumbnails" style="display: flex; gap: 5px; margin: 10px 0;">
                                </div>
                            <button id="wb-btn-confirm-image" class="wb-action-btn" style="width: 100%;" disabled>
                                Attach Selected Image
                            </button>
                        </div>
                        
                        <div id="remix-container" style="display: none;">
                            <h4>Select a Remix:</h4>
                            <div id="remix-options"></div>
                            <button id="wb-btn-confirm-remix" class="wb-action-btn">Accept This Version</button>
                        </div>
                        
                        <p class="wb-note"><i>The Vault management features are functional.</i></p>
                    </div>
                </div>
            </div>

            <div id="vault-screen" class="container" style="display: none;">
                <div id="vault-nav">
                    <button id="vault-btn-back-to-lenses" class="qa-nav-btn">Back to Lenses</button>
                    <h2>The Prompt Vault</h2>
                    <button id="vault-btn-new-prompt" class="qa-nav-btn accent">Create New Prompt</button>
                </div>
                <div id="vault-controls">
                    <input type="text" id="vault-search" placeholder="Search prompts..." class="input-text">
                    <select id="vault-filter-category" class="input-select">
                        <option value="">All Categories</option>
                    </select>
                    <select id="vault-sort" class="input-select">
                        <option value="date_desc">Sort by Date (Newest First)</option>
                        <option value="date_asc">Sort by Date (Oldest First)</option>
                        <option value="title_asc">Sort by Title (A-Z)</option>
                    </select>
                </div>
                <div id="vault-list-container">
                    <ul id="vault-prompt-list">
                        <li class="vault-list-item"><h4>Loading prompts...</h4></li>
                    </ul>
                </div>

                <div id="save-modal" class="modal">
                    <div class="modal-content large">
                        <div class="modal-header">
                            <h2>Save Prompt to Vault</h2>
                            <button class="modal-close" id="close-save-modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="input-group">
                                <label for="save-title">Title:</label>
                                <input type="text" id="save-title" class="input-text">
                            </div>
                            <div class="input-group">
                                <label for="save-category">Category:</label>
                                <select id="save-category" class="input-select"></select>
                                <button id="btn-new-category" class="btn-inline">+</button>
                                <input type="text" id="new-category-name" class="input-text inline hidden" placeholder="New category name...">
                            </div>
                            <div class="input-group">
                                <label for="save-tags">Tags (comma-separated):</label>
                                <input type="text" id="save-tags" class="input-text" placeholder="e.g., code, python, utility">
                            </div>
                            <div class="input-group">
                                <label for="save-purpose">Purpose / Background:</label>
                                <textarea id="save-purpose" class="input-textarea" rows="4" placeholder="Why was this created? What problem does it solve?"></textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button id="btn-cancel-save" class="btn btn-secondary">Cancel</button>
                            <button id="btn-confirm-save" class="btn btn-primary">Save Prompt</button>
                        </div>
                    </div>
                </div>
            </div>
            
        </main>
    </div>

    <div id="test-modal" class="modal"></div>

    <script src="scripts/lens_data.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html>